<!DOCTYPE html>
<html lang="en">
<head>
  <title>Rupnil.Codes â€” Docs</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="modulepreload" href="/script.js">
  <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://www.googleapis.com" crossorigin>
</head>

<body>
  <div id="site-header"></div>
  <script type="module" src="/script.js"></script>

  <section class="docs-search" aria-label="Documentation search" style="padding:2rem;max-width:900px;margin:0 auto;">
    <label for="docs-search-input" style="display:block;margin-bottom:0.5rem;font-weight:600;">Search the docs</label>
    <div style="display:flex;gap:.5rem;align-items:center;">
      <input id="docs-search-input" type="search" placeholder="Search docs, e.g. 'Flavortown Shop'" style="flex:1;padding:0.75rem;border:1px solid #ccc;border-radius:6px;">
      <button id="docs-clear-btn" style="padding:.6rem .8rem;border:1px solid #ccc;border-radius:6px;">Clear</button>
    </div>
    <div id="docs-search-hint" style="color:#666;margin-top:0.5rem;font-size:0.9rem;">Try: <strong>Flavortown Shop</strong></div>

    <div id="docs-results" style="margin-top:1.25rem;"></div>

    <h2 style="margin-top:2rem;">All Docs</h2>
    <ul id="docs-list">
    </ul>
  </section>

  <script>
    (function(){
      const docs = [
        {
          id: 'quick-links',
          title: 'Quick Links',
          description: 'Quick links for things like shop submission forms',
          content: `
            <section>
              <p>
                <a href="https://forms.hackclub.com/flavortown-shop">Flavortown Shop Submission form</a> <br>
                <a href="https://us.review.hackclub.com/queue">Shiprights Review Queue</a>
              </p>
            </section>
          `
        },
        {
          id: 'flavortown-extensions',
          title: 'Flavortown Extensions',
          description: 'The available extensions for Flavortown.',
          content: `
            <section>
              <h3>Cool Flavortown Extensions:</h3>
              <ul>
                <li><a href="https://flavortown.hackclub.com/projects/140">Spicetown</a></li>
                <li><a href="https://flavortown.hackclub.com/projects/135">Flavortown Utils</a></li>
              </ul>
            </section>
          `
        },
        {
          id: 'flavortown-shop',
          title: 'Flavortown Shop',
          description: 'Info on The Flavortown Shop!',
          content: `
            <section>
              <p>
                <a href="https://forms.hackclub.com/flavortown-shop">Flavortown Shop Submission form</a>  
              </p>
            </section>
          `
        },
        {
          id: 'flavortown-ships',
          title: 'Flavortown Ships',
          description: 'Info on the Flavortown Shipwrights',
          content: `
            <section>
              <p>
                <a href="https://us.review.hackclub.com/queue">Flavortown Shipwrights Review Queue</a>
              </p>
            </section>
          `
        },
        {
          id: 'flavortown-project-shipping',
          title: 'Flavortown Project Shipping',
          description: 'Info on Shipping projects',
          content: `
            <section>
              <p>
                <h3>What is a non-negative vote balance?</h3>
                <p> A none negative vote balance means that you have not voted enough times to match your shipped projects. Shipping a project deducts 15 from your vote balance, and so you need to vote on 15 other projects to ship your project. </p>
              </p>
            </section>
          `
        },
        {
          id: 'flavortown-api',
          title: 'Flavortown API',
          description: 'API reference for Flavortown v1 (endpoints, auth, examples).',
          content: `
            <section>
              <a href="https://flavortown.hackclub.com/api/v1/docs" target="_blank" rel="noopener">Flavortown API docs</a>
            </section>
          `
        },

        {
          id: 'how-to-contribute',
          title: 'How to Contribute',
          description: 'How to add and edit community docs.',
          content: `
            <section>
              <p class="lede">We welcome contributions! Add docs by opening a pull request!</p>
              <h3>Quick Start</h3>
              <ul>
                <li>Fork the repo</li>
                <li>Add you documentation to const docs = []; in this page</li>
                <li>Open a PR with a brief description</li>
              </ul>
              <p>Anything to do with flavortown can go here, docs for things like extensions and projects work too!</p>
            </section>
          `
        }
      ];

      const input = document.getElementById('docs-search-input');
      const clearBtn = document.getElementById('docs-clear-btn');
      const results = document.getElementById('docs-results');
      const list = document.getElementById('docs-list');

      function renderList(items){
        list.innerHTML = items.map(d=>{
          return `<li style="padding:.75rem 0;border-bottom:1px solid #eee; display:flex;justify-content:space-between;align-items:center;">
            <div style="text-align:left;flex:1;">
              <div style="font-weight:600;color:#1a73e8;">${d.title}</div>
              <div style="color:#555;font-size:.95rem;">${d.description}</div>
            </div>
            <div style="margin-left:1rem;">
              <button data-id="${d.id}" class="open-doc-btn" style="padding:.45rem .6rem;border-radius:6px;border:1px solid #ddd;">Open</button>
            </div>
          </li>`;
        }).join('');

        Array.from(document.getElementsByClassName('open-doc-btn')).forEach(btn=>{
          btn.addEventListener('click', ()=>{
            const id = btn.getAttribute('data-id');
            const doc = docs.find(x=>x.id === id);
            if(!doc) return;
            showDocInline(doc);
            input.value = doc.title;
          });
        });
      }

      function highlight(q, text){
        if(!q) return text;
        try{
          const re = new RegExp(q.replace(/[.*+?^${}()|[\\]\\]/g, '\\$&'), 'gi');
          return text.replace(re, m=>`<mark style="background:yellow;color:#000;">${m}</mark>`);
        }catch(e){ return text; }
      }

      function renderResults(items, query){
        const q = (query||'').trim();
        if(!q){ results.innerHTML = ''; return; }
        if(items.length === 0){ results.innerHTML = '<div style="color:#d00;">No results</div>'; return; }
        results.innerHTML = items.map(d=>{
          const title = highlight(q, d.title);
          const desc = d.description;
          const contentHTML = d.content;
          return `<article style="padding:1rem;border:1px solid #eee;border-radius:8px;margin-bottom:1rem;">
            <h2 style="margin-top:0;">${title}</h2>
            <div style="color:#555;margin-bottom:.5rem;">${desc}</div>
            <div class="doc-content">${contentHTML}</div>
          </article>`;
        }).join('');
      }

      function normalize(s){ return (s||'').toLowerCase(); }

      function search(q){
        q = (q||'').trim().toLowerCase();
        if(!q) return [];
        return docs.filter(d=>{
          return normalize(d.title).includes(q) || (d.id && d.id.includes(q));
        });
      }

      input.addEventListener('input', (e)=>{
        const q = e.target.value;
        const resultsArr = search(q);
        renderResults(resultsArr, q);
      });

      clearBtn.addEventListener('click', ()=>{
        input.value = '';
        results.innerHTML = '';
      });

      function showDocInline(doc){
        results.innerHTML = `<article style="padding:1rem;border:1px solid #eee;border-radius:8px;margin-bottom:1rem;">
          <h2 style="margin-top:0;">${doc.title}</h2>
          <div style="color:#555;margin-bottom:.5rem;">${doc.description}</div>
          <div class="doc-content">${doc.content}</div>
        </article>`;
      }

      renderList(docs);
    })();
  </script>

  <div id="site-footer"></div>
</body>
</html>
